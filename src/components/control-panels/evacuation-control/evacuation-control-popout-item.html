<link rel="import"
      href="../../../bower_components/polymer/polymer.html">
<link rel="import"
      href="../../../bower_components/paper-shadow/paper-shadow.html">
<link rel="import"
      href="../../../bower_components/paper-ripple/paper-ripple.html">
<link rel="import"
      href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import"
      href="../../../bower_components/core-input/core-input.html">
<polymer-element name="evacuation-control-popout-item"
                 attributes="objectData
                             objects
                             selectedItem
                             selected
                             inputMode
                             interactMode
                             modeSelect
                             side"
                 on-click="{{select}}">
  <template>
    <div vertical layout>
      <div horizontal layout style="flex-direction: {{side == 'left' ? 'row-reverse' : ''}}">
        <div layout vertical center-justified>
          <paper-icon-button id="side-switch"
                             icon="{{side == 'left' ? 'chevron-right' : 'chevron-left'}}"
                             on-tap="{{switchSide}}">
          </paper-icon-button>
        </div>
        <div vertical layout>
          <paper-icon-button id="slide-deploy"
                             class="{{objectData.subtype == 'slide' ? '' : 'dimmed'}}"
                             title="{{objectData.deployed ? 'Retract slide' : 'Deploy Slide'}}"
                             icon="{{objectData.deployed ? 'unfold-less' : 'unfold-more'}}"
                             on-tap="{{toggleDeploy}}">
          </paper-icon-button>
          <paper-icon-button id="evacuee-toggle"
                             on-tap="{{toggleEvacuees}}"
                             icon="{{objectData.active ? 'block' : 'input'}}">
          </paper-icon-button>
        </div>
        <div layout vertical>
          <paper-icon-button id="up"
                             icon="expand-less"
                             on-tap="{{move}}">
          </paper-icon-button>
          <paper-icon-button id="down"
                             icon="expand-more"
                             on-tap="{{move}}">
          </paper-icon-button>
        </div>
      </div>
      <input is="core-input"
             id="name"
             class="{{{'selected':selected.object==objectData}|tokenList}} {{selected.object == objectData ? '' : 'disabled'}}"
             spellcheck="false"
             value="{{objectData.name}}"
             rows="1">
      </input>
    </div>
    <paper-shadow id="shadow"
                  z="0"
                  animated
                  fit>
    </paper-shadow>
    <style>
      :host{
        position: relative;
        display: block;
        width: auto;
        padding: 2px;
        border: 1px solid #575;
        border-radius: 3px;
        text-align: center;
        margin: 0 6px 16px 16px;
        -webkit-user-select: none;
        cursor: default;
        color: #797;
        background-size: 104px 104px;
        background-position-x: 40%;
        background-position-y: 20%;
        background-repeat: no-repeat;
      }
      paper-shadow{
        pointer-events: none;
      }
      paper-icon-button{
        margin: 2px;
        border: 1px solid #575;
        border-radius: 50px;
        color: #cdc;
        background: #686;
        fill: white;
      }
      .disabled{
        pointer-events: none;
      }
      .dimmed{
        opacity: 0.5;
        pointer-events: none;
      }
      #name{
        background: #686;
        font-size: 16px;
        padding: 4px;
        width: auto;
        margin: 2px;
        color: #cdc;
        vertical-align: top;
        color: #cdc;
        border: 1px solid #575;
        cursor: default;
        text-align: center;
      }
      #name.selected{
        cursor: text;
      }
      #name::shadow #input{
        text-align: center;
      }
    </style>
  </template>
  <script src="evacuation-control-popout-item.js">
  </script>
</polymer-element>