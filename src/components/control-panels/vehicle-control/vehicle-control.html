<link rel="import"
      href="/bower_components/polymer/polymer.html">
<link rel="import"
      href="/bower_components/core-header-panel/core-header-panel.html">
<link rel="import"
      href="/bower_components/core-toolbar/core-toolbar.html">
<link rel="import"
      href="/bower_components/paper-shadow/paper-shadow.html">
<link rel="import"
      href="/bower_components/paper-button/paper-button.html">
<link rel="import"
      href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import"
      href="/bower_components/core-icons/core-icons.html">
<link rel="import"
      href="/bower_components/core-icons/maps-icons.html">
<link rel="import"
      href="/bower_components/core-icons/image-icons.html">
<link rel="import"
      href="vehicle-control-item.html">
<polymer-element name="vehicle-control"
                 attributes="inputMode
                             view
                             objects
                             selected
                             panels">
  <template>
    <div id="main-panel">
      <div id="header-panel">
        <span flex>Vehicle<br>Control</span>
      </div>
      <div id="content-scroll-panel">
        <div id="content-panel" layout vertical reverse>
          <template repeat="{{object in objects}}">
            <template if="{{object.type == 'vehicle'}}">
              <vehicle-control-item objectData="{{object}}"
                                selected="{{selected}}"
                                inputMode="{{inputMode}}"
                                objects="{{objects}}">
              </vehicle-control-item>
            </template>
          </template>
        </div>
      </div>
      <div id="top-gradient"></div>
      <div id="bottom-gradient"></div>
      <paper-shadow z="1"
                    fit>
      </paper-shadow>
    </div>
    <div id="toggle-button"
         on-tap="{{togglePanel}}">
      <core-icon icon="{{panels.vehicle.open ? 'chevron-right' : 'maps:local-shipping'}}"
                 style="margin: 8px 10px 8px 8px;">
      </core-icon>
      <paper-ripple fit>
      </paper-ripple>
      <paper-shadow z="1"
                    fit>
      </paper-shadow>
    </div>
    <style>
      :host{
        transition: 0.25s;
        -webkit-transform: translateX({{panels.vehicle.open ? "0" : "184px"}});
        position: absolute;
        top: 56px;
        right: 8px;
        bottom: {{panels.lib.open ? "208px" : "8px"}};
        width: 176px;
      }
      paper-shadow{
        pointer-events: none;
      }
      #main-panel{
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 3;
        background-color: #686;
      }
      #header-panel{
        position: absolute;
        font-size: 24px;
        top: 0;
        left: 0;
        right: 0;
        padding-top: 8px;
        text-align: center;
        height: 56px;
        line-height: 24px;
        background-color: #686;
        color: #cdc;
      }
      #content-scroll-panel{
        position: absolute;
        top: 64px;
        bottom: 0;
        left: 0;
        right: 0;
        overflow-y: scroll;
        overflow-x: hidden;
      }
      #content-scroll-panel::-webkit-scrollbar{
        width: 10px;
      }
      #content-scroll-panel::-webkit-scrollbar-thumb{
        background-color: #aba;
        border: 3px solid #686;
      }
      #content-panel{
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        margin: 8px 6px 8px 16px;
      }
      #bottom-gradient{
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 16px;
        background: linear-gradient(rgba(102, 136, 102, 0), rgba(102, 136, 102, 1));
      }
      #top-gradient{
        position: absolute;
        top: 64px;
        left: 0;
        right: 0;
        height: 8px;
        background: linear-gradient(rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0));
      }
      #toggle-button{
        transition: 0.25s;
        -webkit-transform: translate({{panels.evacuation.open || panels.obj.open ? "44px" : "0"}}, {{panels.vehicle.open ? "25px" : "96px"}});
        z-index: 1;
        position: absolute;
        right: 174px;
        top: 0;
        background-color: #686;
        color: #cdc
      }
    </style>
  </template>
  <script src="vehicle-control.js"></script>
</polymer-element>